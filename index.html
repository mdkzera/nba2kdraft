<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NBA2K Draft</title>
  <style>
    :root{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
    body{max-width:980px;margin:28px auto;padding:20px;background:#E9E9E9;color:#111;text-align:center}
    h1{font-size:20px;margin-bottom:6px}
    p.lead{color:#555;margin-top:0}
    form{background:#fff;border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(20,20,50,0.06);text-align:left}
    .row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .row input[type=text]{flex:1;padding:8px;border:1px solid #dcdce6;border-radius:6px}
    .row select{width:120px;padding:8px;border:1px solid #dcdce6;border-radius:6px}
    .controls{display:flex;gap:8px;margin-top:10px}
    button{padding:10px 12px;border-radius:8px;border:0;background:#0066ff;color:#fff;cursor:pointer}
    button.secondary{background:#e6e9f2;color:#111}
    .output{display:flex;gap:16px;margin-top:16px}
    .card{flex:1;background:#fff;padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(20,20,50,0.04)}
    .card h3{margin:0 0 8px 0}
    ul{padding-left:18px;margin:0}
    .error{color:#b00020;margin-top:8px}
    footer{margin-top:14px;color:#666;font-size:13px}
    .small{font-size:13px;color:#666}
    img.logo{max-width:200px;margin-bottom:16px}
  </style>
</head>
<body>
  <img src="logonba2k.jpeg" alt="NBA 2K Draft Logo" class="logo" />
  <h1>Darft NBA 2K</h1>
  <p class="lead">Preencher os nomes e escolher as posições.</p>

  <form id="playersForm" onsubmit="return false;">
    <div id="playersList">
      <!-- 10 rows geradas por JS -->
    </div>

    <div class="controls">
      <button id="drawBtn" type="button">Gerar Times</button>
      <button id="reshuffleBtn" type="button" class="secondary" disabled>Sortear Novamente</button>
      <button id="fillExample" type="button" class="secondary">Preencher Exemplo</button>
      <button id="resetBtn" type="button" class="secondary">Limpar</button>
    </div>

    <div id="error" class="error" role="alert" aria-live="polite"></div>
  </form>

  <div class="output" id="resultArea" style="display:none">
    <div class="card">
      <h3>Time A</h3>
      <ul id="teamA"></ul>
    </div>
    <div class="card">
      <h3>Time B</h3>
      <ul id="teamB"></ul>
    </div>
  </div>

  <footer>
    <div class="small"> Desenvolvido por mdkzera.</div>
  </footer>

  <script>
    const POSITIONS = ['PG','SG','SF','PF','C'];
    const playersListEl = document.getElementById('playersList');
    const errorEl = document.getElementById('error');
    const resultArea = document.getElementById('resultArea');
    const teamAEl = document.getElementById('teamA');
    const teamBEl = document.getElementById('teamB');
    const drawBtn = document.getElementById('drawBtn');
    const reshuffleBtn = document.getElementById('reshuffleBtn');
    const fillExampleBtn = document.getElementById('fillExample');
    const resetBtn = document.getElementById('resetBtn');

    function makeRows(){
      playersListEl.innerHTML = '';
      for(let i=1;i<=10;i++){
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `
          <input type="text" placeholder="Jogador ${i} (nome)" aria-label="Jogador ${i}" />
          <select aria-label="Posição jogador ${i}">
            ${POSITIONS.map(p=>`<option value="${p}">${p}</option>`).join('')}
          </select>
        `;
        playersListEl.appendChild(row);
      }
    }

    function readPlayers(){
      const rows = Array.from(playersListEl.querySelectorAll('.row'));
      return rows.map(r=>{
        const name = r.querySelector('input').value.trim();
        const pos = r.querySelector('select').value;
        return {name,pos};
      });
    }

    function validatePlayers(players){
      const counts = {};
      for(const p of POSITIONS) counts[p]=0;
      let emptyNames = 0;
      for(const pl of players){
        if(!pl.name) emptyNames++;
        if(POSITIONS.includes(pl.pos)) counts[pl.pos]++;
      }
      const missing = POSITIONS.filter(p=>counts[p]!==2);
      if(missing.length>0){
        return {ok:false, msg:`Cada posição precisa ter exatamente 2 jogadores. Verifique: ${missing.map(m=>m+" ("+counts[m]+")").join(', ')}.`};
      }
      if(emptyNames>0) return {ok:false, msg:`Há ${emptyNames} nome(s) vazio(s). Preencha todos os nomes.`};
      return {ok:true};
    }

    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    function generateTeams(players){
      const byPos = {};
      for(const p of POSITIONS) byPos[p]=[];
      for(const pl of players) byPos[pl.pos].push(pl.name);

      const teamA = [];
      const teamB = [];

      for(const pos of POSITIONS){
        const pair = byPos[pos].slice();
        shuffle(pair);
        teamA.push({name:pair[0],pos});
        teamB.push({name:pair[1],pos});
      }

      shuffle(teamA);
      shuffle(teamB);

      return {teamA,teamB};
    }

    function renderTeams(teams){
      teamAEl.innerHTML = '';
      teamBEl.innerHTML = '';
      teams.teamA.forEach(p=>{
        const li = document.createElement('li');
        li.textContent = `${p.name} — ${p.pos}`;
        teamAEl.appendChild(li);
      });
      teams.teamB.forEach(p=>{
        const li = document.createElement('li');
        li.textContent = `${p.name} — ${p.pos}`;
        teamBEl.appendChild(li);
      });
      resultArea.style.display = 'flex';
    }

    drawBtn.addEventListener('click', ()=>{
      errorEl.textContent = '';
      const players = readPlayers();
      const v = validatePlayers(players);
      if(!v.ok){ errorEl.textContent = v.msg; resultArea.style.display='none'; reshuffleBtn.disabled = true; return; }
      const teams = generateTeams(players);
      renderTeams(teams);
      reshuffleBtn.disabled = false;
    });

    reshuffleBtn.addEventListener('click', ()=>{
      errorEl.textContent = '';
      const players = readPlayers();
      const v = validatePlayers(players);
      if(!v.ok){ errorEl.textContent = v.msg; resultArea.style.display='none'; reshuffleBtn.disabled = true; return; }
      const teams = generateTeams(players);
      renderTeams(teams);
    });

    fillExampleBtn.addEventListener('click', ()=>{
      const sample = ['Lucas','Mateus','Rafael','Guilherme','Pedro','Thiago','Carlos','Felipe','André','Bruno'];
      const selects = Array.from(playersListEl.querySelectorAll('select'));
      const inputs = Array.from(playersListEl.querySelectorAll('input'));
      const posPairs = [];
      for(const p of POSITIONS) posPairs.push(p,p);
      shuffle(posPairs);
      shuffle(sample);
      for(let i=0;i<10;i++){
        inputs[i].value = sample[i] || `Jogador ${i+1}`;
        selects[i].value = posPairs[i];
      }
      errorEl.textContent='Preenchido exemplo — revise nomes/posições se quiser.';
    });

    resetBtn.addEventListener('click', ()=>{
      makeRows();
      errorEl.textContent='';
      resultArea.style.display='none';
      reshuffleBtn.disabled = true;
    });

    makeRows();
  </script>
</body>

</html>

